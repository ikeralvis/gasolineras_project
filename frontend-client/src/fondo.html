<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TankGo - Tu Energía</title>
    <style>
        body {
            margin: 0;
            /* Permitimos scroll vertical, ocultamos horizontal */
            overflow-x: hidden;
            overflow-y: auto;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3e5f5;
        }
       
        /* --- Capa UI (Hero Section) --- */
        #hero-container {
            position: relative;
            height: 100vh; /* Ocupa toda la pantalla inicial */
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Centrar verticalmente el bloque de texto */
            align-items: flex-end;   /* Alinear a la DERECHA */
            padding-right: 10vw;     /* Espacio desde el borde derecho */
            box-sizing: border-box;
            /* El z-index bajo permite que el contenido nuevo pase por encima */
            z-index: 1;
            pointer-events: none; /* Deja pasar clicks al 3D si fuera necesario */
        }

        header {
            /* Eliminamos margin-top fijo para usar flexbox centering */
            text-align: right; /* Texto alineado a la derecha */
            animation: fadeIn 2s ease-out;
            pointer-events: auto;
        }

        h1 {
            margin: 0;
            font-size: 5rem;
            font-weight: 800;
            letter-spacing: -2px;
            color: #4a148c;
            text-shadow: 0 10px 30px rgba(74, 20, 140, 0.2);
        }

        .subtitle {
            font-size: 1.5rem;
            color: #7e57c2;
            font-weight: 300;
            letter-spacing: 4px;
            margin-top: 10px;
            text-transform: uppercase;
        }

        .cta-button {
            margin-top: 40px;
            padding: 15px 40px;
            background: #7e57c2;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(126, 87, 194, 0.4);
            transition: transform 0.2s, background 0.2s;
            pointer-events: auto;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            background: #673ab7;
        }

        /* --- Nuevas Secciones de Contenido --- */
        #content-sections {
            position: relative;
            z-index: 10; /* Por encima del Hero */
            background-color: #ffffff;
            width: 100%;
            box-shadow: 0 -20px 50px rgba(0,0,0,0.1); /* Sombra superior para separar del 3D */
        }

        .section-block {
            padding: 100px 20px;
            max-width: 1000px;
            margin: 0 auto;
            border-bottom: 1px solid #f0f0f0;
        }

        .section-block:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 2.5rem;
            color: #4a148c;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: #9575cd;
            margin-bottom: 40px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .text-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }

        /* Utilidad para 2 columnas */
        .cols-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
        }

        @media (max-width: 768px) {
            .cols-2 {
                grid-template-columns: 1fr;
            }
            h1 { font-size: 3rem; }
            #hero-container {
                align-items: center; /* En móvil volvemos al centro */
                padding-right: 0;
                justify-content: flex-start;
                padding-top: 15vh;
            }
            header { text-align: center; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
   
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
   
    <!-- Hero / 3D Wrapper -->
    <div id="hero-container">
        <header>
            <h1>TankGo</h1>
            <div class="subtitle">Energía en movimiento</div>
            <button class="cta-button">Pedir Gasolina</button>
        </header>
        <!-- Indicador de scroll centrado en la pantalla -->
        <div style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); color: #7e57c2; animation: bounce 2s infinite;">
            ▼ Descubre más
        </div>
    </div>

    <!-- Contenido Principal (Scroll) -->
    <div id="content-sections">
       
        <!-- Sección 1: 1 Columna -->
        <section class="section-block">
            <h2 class="section-title">Lorem Ipsum Dolor</h2>
            <h3 class="section-subtitle">Sit Amet Consectetur Adipiscing</h3>
            <div class="text-content">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia odio vitae vestibulum vestibulum. Cras venenatis euismod malesuada. Nullam ac odio ante. Ut sed sem quis magna ultricies lacinia et sed est. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Integer vel augue sed tellus dictum scelerisque.</p>
                <p>Suspendisse potenti. Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien ornare nisl.</p>
            </div>
        </section>

        <!-- Sección 2: 2 Columnas -->
        <section class="section-block">
            <h2 class="section-title">Vestibulum Commodo</h2>
            <h3 class="section-subtitle">Fusce Dapibus Tellus Ac Cursus</h3>
            <div class="text-content cols-2">
                <div>
                    <p>Curabitur sodales ligula in libero. Sed dignissim lacinia nunc. Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet.</p>
                </div>
                <div>
                    <p>Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi.</p>
                </div>
            </div>
        </section>

        <!-- Sección 3: 2 Columnas (Invertida visualmente o igual) -->
        <section class="section-block" style="background-color: #fbf7fc;">
            <h2 class="section-title">Phasellus Tincidunt</h2>
            <h3 class="section-subtitle">Nunc Egestas Augue At Pellentesque</h3>
            <div class="text-content cols-2">
                <div>
                    <p>Nam dui. Proin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius. Integer ac leo. Nunc rutrum, justo nec tristique cursus, sapien dui vulputate odio, a tempus lectus mauris et nisl. Morbi vitae magna. Nam scelerisque.</p>
                </div>
                <div>
                    <p>Donec nonummy, enim in lacinia pulvinar, velit tellus scelerisque augue, ac posuere libero urna eget neque. Cras ipsum. Vestibulum pretium, lectus nec venenatis volutpat, purus lectus ultrices risus, a condimentum risus mi et quam. Pellentesque auctor neque nec urna.</p>
                </div>
            </div>
        </section>

        <!-- Sección 4: 1 Columna Centrada -->
        <section class="section-block" style="text-align: center;">
            <h2 class="section-title">Ultricies Lacinia</h2>
            <h3 class="section-subtitle">Donec Vitae Sapien Ut Libero</h3>
            <div class="text-content">
                <p style="max-width: 700px; margin: 0 auto;">Cras venenatis euismod malesuada. Nullam ac odio ante. Ut sed sem quis magna ultricies lacinia et sed est. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec odio tempus molestie, porttitor ut, iaculis quis, sem. </p>
                <br>
                <button class="cta-button">Contactar Ahora</button>
            </div>
        </section>

    </div>

    <script type="module">
        import * as THREE from 'three';

        // --- Configuración de la Escena ---
        const scene = new THREE.Scene();
       
        // Paleta de colores
        const colors = {
            bg: 0xf3e5f5,
            ground: 0xffffff,
            primary: 0x7e57c2,
            dark: 0x4527a0,
            accent: 0xd1c4e9,
            neon: 0xb388ff
        };

        scene.background = new THREE.Color(colors.bg);
        scene.fog = new THREE.Fog(colors.bg, 20, 60);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
       
        // Posición de la cámara (ligeramente elevada y alejada)
        const initialCamPos = { x: 15, y: 12, z: 35 };
        camera.position.set(initialCamPos.x, initialCamPos.y, initialCamPos.z);
       
        // CLAVE 1: Miramos EXACTAMENTE al centro de la gasolinera (0,0,0)
        // Esto asegura que la gasolinera sea el eje de rotación
        camera.lookAt(0, 2, 0);

        // CLAVE 2: Función para desplazar la proyección
        // Esto "empuja" el centro de la imagen hacia la izquierda sin cambiar el eje físico
        function updateCameraOffset() {
            const w = window.innerWidth;
            const h = window.innerHeight;
            // El tercer parámetro (x offset) es positivo para mover la vista hacia la derecha del centro virtual
            // lo que hace que el objeto aparezca a la IZQUIERDA de la pantalla.
            // Usamos un 25% del ancho (w * 0.25) como desplazamiento.
            camera.setViewOffset(w, h, w * 0.25, 0, w, h);
            camera.updateProjectionMatrix();
        }

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
       
        // Estilo para fijar el canvas al fondo
        renderer.domElement.style.position = 'fixed';
        renderer.domElement.style.top = '0';
        renderer.domElement.style.left = '0';
        renderer.domElement.style.zIndex = '-1';
        document.body.appendChild(renderer.domElement);

        // Aplicar el offset inicial
        updateCameraOffset();

        // --- Interactividad del Ratón (Parallax) ---
        let mouseX = 0;
        let mouseY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - windowHalfX) / windowHalfX;
            mouseY = (event.clientY - windowHalfY) / windowHalfY;
        });

        // --- Iluminación ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);
        dirLight.position.set(10, 20, 10);
        dirLight.castShadow = true;
        dirLight.shadow.mapSize.width = 2048;
        dirLight.shadow.mapSize.height = 2048;
        scene.add(dirLight);

        // --- Materiales ---
        const matPrimary = new THREE.MeshStandardMaterial({ color: colors.primary, flatShading: true });
        const matDark = new THREE.MeshStandardMaterial({ color: colors.dark, flatShading: true });
        const matAccent = new THREE.MeshStandardMaterial({ color: colors.accent, flatShading: true });
        const matWhite = new THREE.MeshStandardMaterial({ color: 0xffffff, flatShading: true });
        const matGlass = new THREE.MeshStandardMaterial({
            color: 0x9575cd,
            transparent: true,
            opacity: 0.6,
            roughness: 0.1
        });

        // --- Objetos ---

        // 1. Suelo
        const groundGeo = new THREE.CircleGeometry(80, 64);
        const groundMat = new THREE.MeshStandardMaterial({ color: colors.ground });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        function createBox(w, h, d, material, x, y, z, castShadow = true) {
            const geo = new THREE.BoxGeometry(w, h, d);
            const mesh = new THREE.Mesh(geo, material);
            mesh.position.set(x, y, z);
            mesh.castShadow = castShadow;
            mesh.receiveShadow = true;
            return mesh;
        }

        // 2. Estación
        const stationGroup = new THREE.Group();
        const roof = createBox(12, 0.5, 8, matWhite, 0, 4.5, 0);
        const roofStripe = createBox(12.1, 0.2, 8.1, matPrimary, 0, 4.5, 0);
        stationGroup.add(roof, roofStripe);

        const colGeo = new THREE.CylinderGeometry(0.3, 0.3, 4.5, 8);
        const col1 = new THREE.Mesh(colGeo, matDark); col1.position.set(-4, 2.25, 0); col1.castShadow = true;
        const col2 = new THREE.Mesh(colGeo, matDark); col2.position.set(4, 2.25, 0); col2.castShadow = true;
        stationGroup.add(col1, col2);

        function createPump(x, z) {
            const group = new THREE.Group();
            const base = createBox(1, 2, 0.6, matAccent, 0, 1, 0);
            const screen = createBox(0.8, 0.4, 0.65, matDark, 0, 1.4, 0);
            const hose = createBox(0.2, 1.5, 0.1, matPrimary, 0.5, 0.8, 0);
            group.add(base, screen, hose);
            group.position.set(x, 0, z);
            return group;
        }
        stationGroup.add(createPump(-2, 0), createPump(0, 0), createPump(2, 0));
        const island = createBox(9, 0.2, 2, new THREE.MeshStandardMaterial({ color: 0xeeeeee }), 0, 0.1, 0);
        stationGroup.add(island);
        scene.add(stationGroup);

        // 3. Tienda
        const storeGroup = new THREE.Group();
        storeGroup.position.set(0, 0, -8);
        const building = createBox(10, 3.5, 5, matWhite, 0, 1.75, 0);
        const windowMesh = createBox(8, 2, 5.1, matGlass, 0, 1.5, 0);
        const sign = createBox(4, 0.8, 0.2, matPrimary, 0, 4, 2.5);
        storeGroup.add(building, windowMesh, sign);
        scene.add(storeGroup);

        // 4. Decoración
        function createLowPolyTree(x, z, scale = 1) {
            const treeGroup = new THREE.Group();
            const trunkGeo = new THREE.CylinderGeometry(0.2 * scale, 0.3 * scale, 1 * scale, 5);
            const trunk = new THREE.Mesh(trunkGeo, matDark); trunk.position.y = 0.5 * scale; trunk.castShadow = true;
            const leavesGeo = new THREE.ConeGeometry(1.5 * scale, 3 * scale, 6);
            const leaves = new THREE.Mesh(leavesGeo, new THREE.MeshStandardMaterial({ color: colors.primary, flatShading: true }));
            leaves.position.y = 2 * scale; leaves.castShadow = true;
            treeGroup.add(trunk, leaves);
            treeGroup.position.set(x, 0, z);
            return treeGroup;
        }
        scene.add(createLowPolyTree(-10, -5, 1.2), createLowPolyTree(-12, -2, 0.8), createLowPolyTree(10, -6, 1), createLowPolyTree(12, 5, 1.5));

        function createCar(color, x, z, rotY) {
            const carGroup = new THREE.Group();
            const chassis = createBox(2, 0.6, 1, new THREE.MeshStandardMaterial({ color: color, flatShading: true }), 0, 0.5, 0);
            const cabin = createBox(1.2, 0.5, 0.8, matWhite, -0.1, 1, 0);
            const wheelGeo = new THREE.BoxGeometry(0.4, 0.4, 1.1);
            const wheelMat = new THREE.MeshStandardMaterial({ color: 0x333333 });
            const w1 = new THREE.Mesh(wheelGeo, wheelMat); w1.position.set(-0.6, 0.2, 0);
            const w2 = new THREE.Mesh(wheelGeo, wheelMat); w2.position.set(0.6, 0.2, 0);
            carGroup.add(chassis, cabin, w1, w2);
            carGroup.position.set(x, 0, z);
            carGroup.rotation.y = rotY;
            return carGroup;
        }
        const car1 = createCar(colors.neon, 2, 2.5, 0);
        scene.add(car1);

        // --- Partículas de Nieve ---
        const snowCount = 1500;
        const snowGeometry = new THREE.BufferGeometry();
        const snowPositions = [];
        for (let i = 0; i < snowCount; i++) {
            snowPositions.push((Math.random() - 0.5) * 100, Math.random() * 50, (Math.random() - 0.5) * 100);
        }
        snowGeometry.setAttribute('position', new THREE.Float32BufferAttribute(snowPositions, 3));

        function getSnowTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 32; canvas.height = 32;
            const context = canvas.getContext('2d');
            const gradient = context.createRadialGradient(16, 16, 0, 16, 16, 16);
            gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
            gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
            context.fillStyle = gradient;
            context.fillRect(0, 0, 32, 32);
            return new THREE.CanvasTexture(canvas);
        }

        const snow = new THREE.Points(snowGeometry, new THREE.PointsMaterial({
            color: 0xffffff, size: 0.4, map: getSnowTexture(), transparent: true, opacity: 0.8, depthWrite: false, blending: THREE.AdditiveBlending
        }));
        scene.add(snow);

        // --- Animación ---
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            // --- Lógica de Movimiento del Ratón (Parallax) ---
            const targetX = initialCamPos.x + (mouseX * 5);
            const targetY = initialCamPos.y + (-mouseY * 2);

            camera.position.x += (targetX - camera.position.x) * 0.05;
            camera.position.y += (targetY - camera.position.y) * 0.05;
           
            // Mantenemos siempre el foco en el centro REAL de la escena (gasolinera)
            // El desplazamiento a la izquierda lo hace el setViewOffset, no el lookAt
            camera.lookAt(0, 2, 0);

            // Animación Nieve
            const positions = snow.geometry.attributes.position.array;
            for (let i = 0; i < positions.length; i += 3) {
                positions[i + 1] -= 0.1;
                positions[i] += Math.sin(time + positions[i+1]) * 0.02;
                if (positions[i + 1] < 0) {
                    positions[i + 1] = 50;
                    positions[i] = (Math.random() - 0.5) * 100;
                    positions[i + 2] = (Math.random() - 0.5) * 100;
                }
            }
            snow.geometry.attributes.position.needsUpdate = true;

            // Animación Árboles
            scene.traverse((object) => {
                if (object.geometry && object.geometry.type === 'ConeGeometry') {
                    object.rotation.y = Math.sin(time * 0.5) * 0.05;
                }
            });

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            // Importante: Recalcular el offset al redimensionar
            updateCameraOffset();
        });

        animate();
    </script>
   
    <style>
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
    </style>
</body>
</html>